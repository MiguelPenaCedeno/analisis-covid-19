---
title: "Taller aplicado"
output: pdf_document
date: "2025-02-06"
---

El siguiente taller aplicado lo realizaron: Miguel Ángel Peña Cedeño, Gabriel Puello, Valentina ..., Juan Jose...

1. La base de datos seleccionada fue de "Casos_positivos_de_COVID-19_en_Colombia._(fecha de descarga).csv" tomada del siguiente link: https://www.datos.gov.co/Salud-y-Protecci-n-Social/Casos-positivos-de-COVID-19-en-Colombia-/gt2j-8ykr/about_data

Se trata de un dataset realizado por el Instituto Nacional de Salud acerca de los casos positivos de COVID-19 en Colombia, estos datos han sido recopilados desde 2020 y la ultima actualización fue realizada el 14 de agosto de 2024. Son sumamente relevantes en materia de salud para el país y su analisis puede arrojar datos valiosos para preparar mejor a la sociedad colombiana en caso de una futura pandemia ya que este se trata de un fenomeno que eventualmente volverá a ocurrir.

Iniciamos nuestro analisis cargando las 3 librerias que usaremos a lo largo del documento, las dos primeras vistas en clase y la tercera nos ha resultado de utilidad para poder generar graficos mas amigables a la vista al momento de tener que representar valores grandes en variables. Adicionalmente vamos a crear una variable "db" que va a permitir trabajar mas facil con la base de datos y va a leer de un archivo en formato .csv, por ultimo, realizamos str(db) para empezar a ver de que forma está estructurado el dataset.

```{r}
library(dplyr)
library(ggplot2)
library(scales)

db <- read.csv("Casos_positivos_de_COVID-19_en_Colombia._20250210.csv")
str(db)
```

2. Encontramos un total de 23 variables y 6.390.971 observaciones en el dataset, de estas se realizo una selección intencional de las variables que consideramos mas relevantes para el analisis, ya que variables como "ID.de.caso" no resultaban especialmente utiles a la hora del analisis, nos quedamos con estas X variables:

 1. fecha.reporte.web           : chr  
 3. Fecha.de.notificación       : chr  
 4. Código.DIVIPOLA.departamento: int  
 5. Nombre.departamento         : chr  
 6. Código.DIVIPOLA.municipio   : int 
 7. Nombre.municipio            : chr  
 8.  Edad                      : Variable cuantitativa de razon
 9. Unidad.de.medida.de.edad    : int  
 10. Sexo                      : Variable cualitativa nominal              AQUI HACE FALTA EXPLICAR LAS VARIABLES
 11. Tipo.de.contagio          : Variable cualitativa nominal 
 $ Ubicación.del.caso          : chr  
 $ Estado                      : chr 
 $ Código.ISO.del.país         : int  
 $ Nombre.del.país             : chr  
 $ Recuperado                  : chr  
 $ Fecha.de.inicio.de.síntomas : chr 
 $ Fecha.de.muerte             : chr  
 $ Fecha.de.diagnóstico        : chr  
 $ Fecha.de.recuperación       : chr  
 $ Tipo.de.recuperación        : chr  
 $ Pertenencia.étnica          : int 
 $ Nombre.del.grupo.étnico     : chr  

3. A continuacion hacemos la presentacion de los datos sirviendonos de una tabla de frecuencia que nos muestre la edad en intervalos de 10 años por el numero de casos de infeccion, esto para no tener que hacer 114 filas distintas en la tabla sino solo 12, vale la pena tener en cuenta que para esto tambien vamos a ignorar todos los valores nulos dentro de la variable.

```{r}

db <- read.csv("Casos_positivos_de_COVID-19_en_Colombia._20250210.csv")

bins <- seq(min(db$Edad, na.rm = TRUE), max(db$Edad, na.rm = TRUE), by = 10)

tabla_frecuencia <- db %>%
  mutate(Edad = cut(Edad, breaks = bins, include.lowest = TRUE)) %>%
  group_by(Edad) %>%
  summarise(n_personas = n())
tabla_frecuencia
```
A continuacion vamos a visualizar la misma tabla de frecuencia haciendo uso de un grafico de barras, aqui es donde nos resulto util la inclusion de la libreria (scales) en los valores del eje y.

```{r}
ggplot(tabla_frecuencia, aes(x = Edad, y = n_personas)) +
  geom_bar(stat = "identity", fill = "lightblue", color = "black", na.rm = TRUE) +
  labs(title = "Numero de casos Positivos por Edad", x = "Edades por intervalos de 10 años", y = "Cantidad de Personas") +
  scale_y_continuous(labels = comma) +
  theme_minimal()
```

Para continuar con la presentacion de los datos nos ayudaremos de una segunda tabla de frecuencias


En el siguiente analisis vamos a hacer un dataframe agrupando el numero de casos totales por dia por las fechas de diagnostico de infección

```{r}

db$Fecha.de.diagnóstico <- as.Date(db$Fecha.de.diagnóstico, format = "%Y-%m-%d")

casos_por_dia <- db %>%
  group_by(Fecha.de.diagnóstico) %>%
  summarise(n_casos = n())

ggplot(casos_por_dia, aes(x = Fecha.de.diagnóstico, y = n_casos)) +
  geom_line(color = "blue") +
  labs(title = "Número de Casos Positivos de COVID-19 por Día",
       x = "Fecha de Diagnóstico",
       y = "Número de Casos") +
  theme_minimal()
```
Gracias a la graficacion de este dataframe nos es visible en que momentos se presentaron los picos de infección, podriamos establecer 3 principales que serian: a inicios de 2021, a mitades de 2021 y finalmente a inicios de 2022

4. A continuacion vamos a calcular las medidas de tendencia central para las variables que consideramos relevantes hacer este tipo de analisis.

```{r}
mean(db$Edad)
median(db$Edad)

```
Encontramos que el promedio de edad de los casos positivos es de aproximadamente 40 años, y la mediana es de 38 años, lo que sugiere una distribución muy ligeramente sesgada.

Vamos a graficar la edad ya no por intervalos para ver si podemos visualizar esto mismo:

```{r}
ggplot(db, aes(x = Edad)) +
  geom_histogram(bins = 40, color = "black", fill = "skyblue", na.rm = TRUE) +
  labs(title = "Distribución del número de infecciones por edad",
    x = "Edades", y = "Número de personas") +
  theme_minimal()
```

Efectivamente podemos ver que esta es una grafica ligeramente sesgada hacia la derecha.

```{r}
var(db$Edad)
sd(db$Edad)
```

